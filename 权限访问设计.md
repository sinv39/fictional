使用spring security

# 角色种类

## 普通成员
- **常量值**: `USER`
- **说明**: 通过申请审批后的普通社团成员

## 管理员
- **常量值**: `ADMIN`
- **说明**: 拥有全部管理权限的管理员

---

# 访问控制

## 公开接口（不进行权限限制）

以下接口无需登录，任何人都可以访问：

| 接口名称 | 接口路径 | 方法 | 说明 |
|---------|---------|------|------|
| 获取主页封面 | /api/cover/home | GET | 获取网站主页封面 |
| 获取社团介绍封面 | /api/cover/intro | GET | 获取社团介绍页封面和介绍文字 |
| 用户登录 | /api/auth/login | POST | 使用学号和密码登录 |
| 申请加入 | /api/auth/apply | POST | 填写信息申请加入社团 |
| 查看所有视频 | /api/videos | GET | 浏览社团原创视频列表 |
| 查看所有图片 | /api/photos | GET | 浏览社团相册图片列表 |
| 查看所有大事记 | /api/events | GET | 浏览社团大事记列表 |

---

## 需要 ADMIN 权限的接口

以下接口需要登录且角色为 `ADMIN` 才能访问：

| 接口名称 | 接口路径 | 方法 | 说明 |
|---------|---------|------|------|
| 上传视频 | /api/videos | PUT | 上传社团视频到MinIO |
| 上传图片 | /api/photos | PUT | 上传社团图片到MinIO |
| 发布大事记 | /api/events | POST | 发布新的社团大事记 |
| 查看所有申请 | /api/applications | GET | 查看入社申请列表 |
| 查看申请详情 | /api/applications/{id} | GET | 查看单个申请的详细信息 |
| 同意申请 | /api/applications/{id}/approve | POST | 同意某个入社申请 |
| 拒绝申请 | /api/applications/{id}/reject | POST | 拒绝某个入社申请 |

---

# Spring Security 配置要点

## 1. 跨域配置
- 允许所有来源访问（CORS 设置为 `*`）
- 不进行跨域保护

## 2. 认证方式
- 使用 **JWT Token** 进行身份认证
- 登录成功后返回 JWT Token
- 后续请求需在 Header 中携带：`Authorization: Bearer {token}`

## 3. 密码加密
- 使用 **ARGON2** 算法加密用户密码
- 不使用明文存储密码

## 4. 权限拦截器配置建议

```java
// SecurityConfig 伪代码示例
http
    .authorizeHttpRequests(auth -> auth
        // 公开接口
        .requestMatchers("/api/cover/**").permitAll()
        .requestMatchers("/api/auth/login").permitAll()
        .requestMatchers("/api/auth/apply").permitAll()
        .requestMatchers(HttpMethod.GET, "/api/videos").permitAll()
        .requestMatchers(HttpMethod.GET, "/api/photos").permitAll()
        .requestMatchers(HttpMethod.GET, "/api/events").permitAll()
        
        // ADMIN 权限接口
        .requestMatchers(HttpMethod.PUT, "/api/videos").hasRole("ADMIN")
        .requestMatchers(HttpMethod.PUT, "/api/photos").hasRole("ADMIN")
        .requestMatchers(HttpMethod.POST, "/api/events").hasRole("ADMIN")
        .requestMatchers("/api/applications/**").hasRole("ADMIN")
        
        // 其他请求需要认证
        .anyRequest().authenticated()
    )
```

## 5. 异常处理

当用户访问无权限的接口时，应返回统一的错误响应：

```json
{
    "code": 1,
    "msg": "无权访问此接口",
    "data": null
}
```

当 Token 无效或过期时，应返回：

```json
{
    "code": 1,
    "msg": "Token无效或已过期，请重新登录",
    "data": null
}
```